# AI Context: Free Calorie Track Maintenance

**Purpose:** This file helps AI assistants (like Claude) maintain this project even after context loss.

**Last Updated:** 2026-02-27

---

## Critical: Read This First

### Project Structure

**TWO separate applications in this repo:**

1. **Main App:** `/calorie-tracker` (Vite + React SPA)
2. **Blog:** `/blog-astro` (Astro static site) - FUTURE, not yet created

Both deploy together to `freecalorietrack.com` via Vercel.

---

## Footer Management (MOST IMPORTANT)

### Single Source of Truth

**ALWAYS edit:** `/shared/footer-content.js`

**NEVER edit footer HTML in:**
- `/calorie-tracker/index.html`
- `/blog-astro/src/layouts/BlogLayout.astro` (when created)

### How It Works

1. Footer content defined in `/shared/footer-content.js` (JavaScript module)
2. Main app imports at BUILD TIME via Vite plugin (when implemented)
3. Blog imports directly in Astro layout
4. Both projects render same footer from shared data

### When User Says "Update Footer"

**Process:**
1. Open `/shared/footer-content.js`
2. Edit relevant section (medicalDisclaimer, gearLinks, supportSection, etc.)
3. Changes automatically appear in both main app and blog on next build
4. No need to touch HTML files

### Example: Add Affiliate Link

```javascript
// In /shared/footer-content.js
gearLinks: {
  items: [
    // ... existing items ...
    { emoji: "ðŸŽ½", text: "New Product", url: "https://amzn.to/..." }
  ]
}
```

### Example: Update Copyright

```javascript
// In /shared/footer-content.js
copyright: {
  year: 2027, // or new Date().getFullYear()
  entity: "Unexpectable LLC"
}
```

---

## Common User Requests & How to Handle

### "Update the footer"
â†’ Edit `/shared/footer-content.js`
â†’ Don't touch HTML files

### "Add a blog article"
â†’ Create `/blog-astro/src/content/blog/slug.md`
â†’ Add frontmatter (title, description, pubDate)
â†’ Update `/blog-astro/public/sitemap.xml`

### "Update Terms/Privacy"
â†’ Edit `/calorie-tracker/public/terms-of-service.html` or `privacy-policy.html`
â†’ Blog links to main app's legal pages (no duplication)

### "Change colors/styles"
â†’ Edit both Tailwind configs:
  - `/calorie-tracker/tailwind.config.js`
  - `/blog-astro/tailwind.config.mjs`
â†’ Must stay in sync

### "Update copyright year"
â†’ Edit `/shared/footer-content.js` copyright.year
â†’ Auto-updates in both projects

### "Add new affiliate link"
â†’ Edit `/shared/footer-content.js` gearLinks.items array
â†’ Add: `{ emoji: "X", text: "Y", url: "Z" }`

---

## Project Architecture

### Main App (Vite + React)

**Purpose:** Calorie tracking application
**Tech:** Vite, React, Tailwind, React Router
**Data:** localStorage (client-side only, no backend)
**Deploy:** `freecalorietrack.com`

**Key Files:**
- `/calorie-tracker/index.html` - Main HTML (footer injected at build)
- `/calorie-tracker/src/App.jsx` - Main React component
- `/calorie-tracker/tailwind.config.js` - Styles config
- `/calorie-tracker/public/` - Static assets, legal docs

### Blog (Astro) - WHEN CREATED

**Purpose:** SEO-optimized blog articles
**Tech:** Astro, Markdown, Tailwind
**Content:** Static HTML generated at build time
**Deploy:** `freecalorietrack.com/blog/*`

**Key Files:**
- `/blog-astro/src/content/blog/*.md` - Blog articles
- `/blog-astro/src/layouts/BlogLayout.astro` - Layout (uses shared footer)
- `/blog-astro/tailwind.config.mjs` - Must match main app
- `/blog-astro/public/sitemap.xml` - SEO sitemap

---

## Build System

### Main App
```bash
cd calorie-tracker
npm run dev     # Dev server
npm run build   # Production build
```

### Blog (when created)
```bash
cd blog-astro
npm run dev     # Dev server
npm run build   # Static site generation
```

### Shared Footer Injection

**Main app:** Vite plugin injects footer at build time (to be implemented)
**Blog:** Astro imports footer-content.js and renders in layout

---

## Critical Sync Points

**These MUST stay identical between main app and blog:**

1. **Footer content** â†’ Automatic (shared file)
2. **Tailwind config** â†’ Manual sync required
3. **Google Fonts** â†’ Must load same fonts in both
4. **Dark mode CSS** â†’ Must use same color variables
5. **Copyright year** â†’ Automatic (shared file)

**If user reports "blog looks different":**
â†’ Check Tailwind configs match
â†’ Check fonts loading correctly
â†’ Check dark mode CSS variables

---

## When Context is Lost

**You'll likely forget:**
- That there are two separate projects
- That footer is in `/shared/footer-content.js`
- That Tailwind configs must stay in sync

**Always check these first:**
1. Read this file (`.ai-context.md`)
2. Read `/MAINTENANCE.md` for comprehensive guide
3. Check `/shared/README.md` for shared content system

**Before editing footer:**
1. Search for "footer" in project
2. You'll find `/shared/footer-content.js`
3. Edit that file, not HTML

---

## Legal Entity

**Operator:** Unexpectable LLC
**Address:** 418 Broadway, Ste N, Albany, NY 12207
**Email:** FreeCalorieTrack@gmail.com
**State:** New York

**Update these if LLC info changes:**
- `/calorie-tracker/public/terms-of-service.html` (contact section)
- `/calorie-tracker/public/privacy-policy.html` (contact section)
- `/shared/footer-content.js` (copyright.entity)

---

## Blog Article Template

**When user asks to add blog article:**

```markdown
---
title: "Article Title Here (50-60 chars)"
description: "SEO meta description here (150-160 chars)"
pubDate: 2026-03-15
author: "FCT Staff"
image: "/images/blog/article-slug.webp"
---

# Article Title

Your content here in Markdown...

## Section Heading

More content...
```

**After creating article:**
1. Add to `/blog-astro/public/sitemap.xml`
2. Build and test locally
3. Commit and push

---

## Deployment

**Platform:** Vercel
**Auto-deploy:** Yes (on push to main)

**Vercel Config:**
- Build command: `npm run build`
- Output directory: `dist`
- Root directory: `calorie-tracker`

**Blog routing:** Handled by `/vercel.json` rewrites (when blog created)

---

## Troubleshooting Guide

### Issue: Footer not updating

**Cause:** Didn't edit shared file, or didn't rebuild.

**Fix:**
1. Check if you edited `/shared/footer-content.js` (correct)
2. If you edited HTML directly (wrong), move changes to shared file
3. Run `npm run build` in both projects
4. Clear browser cache

---

### Issue: Blog styles don't match main app

**Cause:** Tailwind configs out of sync.

**Fix:**
1. Copy `/calorie-tracker/tailwind.config.js` content
2. Paste into `/blog-astro/tailwind.config.mjs` (adjust exports syntax)
3. Rebuild blog
4. Test visually

---

### Issue: Dark mode broken in blog

**Cause:** BlogLayout not reading localStorage.

**Fix:** Ensure BlogLayout.astro has:
```javascript
<script>
  if (localStorage.getItem('darkMode') === 'true') {
    document.documentElement.classList.add('dark');
  }
</script>
```

---

### Issue: User reports footer out of date

**Cause:** You (AI) edited HTML directly instead of shared file.

**Fix:**
1. Move footer content to `/shared/footer-content.js`
2. Update both projects to use shared file
3. Apologize to user, explain the system

---

## Decision Trees

### User: "Update the footer to say X"

```
Does footer content live in /shared/footer-content.js?
â”œâ”€ Yes â†’ Edit that file âœ…
â””â”€ No â†’ Setup shared system first, then edit
```

### User: "Add new blog article about X"

```
Does /blog-astro exist?
â”œâ”€ Yes â†’ Create .md file in /blog-astro/src/content/blog/ âœ…
â””â”€ No â†’ Tell user blog not set up yet, offer to create it
```

### User: "Change the color of X"

```
Does change affect both main app AND blog?
â”œâ”€ Yes â†’ Update BOTH Tailwind configs
â””â”€ No â†’ Update only relevant project's config
```

---

## Communication with User

### When Suggesting Changes

**Always mention:**
1. Which file(s) you're editing
2. Whether it affects main app, blog, or both
3. If they need to test both projects

**Example:**
> "I'm updating the footer in `/shared/footer-content.js`. This will automatically update both the main app and blog. After I commit, you can test:
> - Main app: `cd calorie-tracker && npm run dev`
> - Blog: `cd blog-astro && npm run dev`"

### When Context is Low

**If you're running out of context tokens:**
1. Prioritize critical changes first
2. Commit early and often
3. Tell user you may need to continue in next session
4. Reference this file in commit message so future-you can continue

---

## Future-Proofing Notes

### If Blog Doesn't Exist Yet

**When user asks to create blog:**
1. Read this entire file first
2. Follow architecture described here
3. Ensure footer system integrates correctly
4. Test both projects before saying "done"

### If Footer System Not Implemented Yet

**Current state (as of 2026-02-27):**
- `/shared/footer-content.js` created with structure
- Vite plugin NOT yet implemented
- Astro blog NOT yet created

**To complete:**
1. Write Vite plugin to inject footer at build time
2. Create Astro blog
3. Configure Astro layout to use shared footer
4. Test that both projects show identical footer

---

## Quick Reference Commands

### Main App
```bash
cd calorie-tracker
npm run dev          # http://localhost:5173
npm run build
npm run preview
```

### Blog (when created)
```bash
cd blog-astro
npm run dev          # http://localhost:4321
npm run build
npm run preview
```

### Both Projects
```bash
# Update dependencies
cd calorie-tracker && npm update
cd blog-astro && npm update

# Check for security issues
cd calorie-tracker && npm audit
cd blog-astro && npm audit
```

---

## Remember

1. **Footer = `/shared/footer-content.js`** (say it three times)
2. **Two projects = two builds** (don't forget blog)
3. **Tailwind configs must sync** (or styling breaks)
4. **Read MAINTENANCE.md** (when you need more detail)
5. **Test both projects** (before committing)

---

**If this file is outdated, update it immediately. You're helping future-you.**
